<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–§—Ä–∏–ª–∞–Ω—Å –°–∏–º—É–ª—è—Ç–æ—Ä: –ü–æ–≥–∞—Å–∏ –¥–æ–ª–≥!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
            image-rendering: pixelated;
        }

        body {
            background-color: #2c3e50;
            color: #ecf0f1;
            overflow: hidden;
        }

        #game-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* –°—Ç–∞—Ç—É—Å –±–∞—Ä */
        #status-bar {
            background-color: #34495e;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            border-bottom: 3px solid #1a252f;
        }

        .stat {
            display: flex;
            align-items: center;
            margin-right: 15px;
        }

        .stat-icon {
            width: 24px;
            height: 24px;
            margin-right: 5px;
            background-color: #7f8c8d;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .stat-bar {
            width: 100px;
            height: 16px;
            background-color: #2c3e50;
            border: 2px solid #1a252f;
            position: relative;
            overflow: hidden;
        }

        .stat-fill {
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }

        #hp-fill {
            background-color: #e74c3c;
            width: 80%;
        }

        #energy-fill {
            background-color: #f1c40f;
            width: 70%;
        }

        #sleep-fill {
            background-color: #3498db;
            width: 50%;
        }

        #xp-fill {
            background-color: #2ecc71;
            width: 30%;
        }

        #money {
            color: #f1c40f;
            font-weight: bold;
        }

        #debt {
            color: #e74c3c;
            font-weight: bold;
        }

        .buff {
            display: inline-block;
            padding: 2px 6px;
            margin-left: 5px;
            border-radius: 3px;
            font-size: 12px;
        }

        .burnout {
            background-color: #e67e22;
        }

        .caffeine {
            background-color: #9b59b6;
        }

        /* –†–∞–±–æ—á–∏–π —Å—Ç–æ–ª */
        #desktop {
            flex-grow: 1;
            background-color: #1a252f;
            background-image: linear-gradient(45deg, #1a252f 25%, #1e2a36 25%, #1e2a36 50%, #1a252f 50%, #1a252f 75%, #1e2a36 75%, #1e2a36 100%);
            background-size: 20px 20px;
            padding: 20px;
            display: flex;
            flex-wrap: wrap;
            align-content: flex-start;
            gap: 20px;
            position: relative;
        }

        .desktop-icon {
            width: 80px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .desktop-icon:hover {
            transform: scale(1.1);
        }

        .icon-img {
            width: 64px;
            height: 64px;
            margin: 0 auto 5px;
            background-color: #34495e;
            border: 2px solid #2c3e50;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
        }

        .icon-label {
            font-size: 12px;
            color: #ecf0f1;
            text-shadow: 1px 1px 0 #000;
        }

        /* –û–∫–Ω–æ –Ω–æ–≤–µ–ª–ª—ã */
        #novel-window {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            max-width: 800px;
            height: 70%;
            background-color: #2c3e50;
            border: 4px solid #1a252f;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            display: none;
            flex-direction: column;
            z-index: 10;
        }

        #novel-header {
            background-color: #34495e;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #1a252f;
        }

        #close-novel {
            background: none;
            border: none;
            color: #ecf0f1;
            font-size: 18px;
            cursor: pointer;
        }

        #novel-content {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
            line-height: 1.5;
        }

        .character {
            font-weight: bold;
            color: #3498db;
            margin-bottom: 5px;
        }

        .dialogue {
            margin-bottom: 15px;
            min-height: 20px;
        }

        .typing {
            border-right: 2px solid #3498db;
            animation: blink 0.7s infinite;
        }

        @keyframes blink {
            0%, 100% { border-color: transparent; }
            50% { border-color: #3498db; }
        }

        #novel-choices {
            padding: 15px;
            background-color: #34495e;
            border-top: 2px solid #1a252f;
        }

        .choice {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            margin: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .choice:hover {
            background-color: #2980b9;
        }

        .choice-warning {
            background-color: #e67e22;
        }

        .choice-warning:hover {
            background-color: #d35400;
        }

        .choice-disabled {
            background-color: #7f8c8d;
            cursor: not-allowed;
        }

        /* –ú–∞–≥–∞–∑–∏–Ω */
        #shop-window {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 70%;
            max-width: 600px;
            height: 60%;
            background-color: #2c3e50;
            border: 4px solid #1a252f;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            display: none;
            flex-direction: column;
            z-index: 10;
        }

        #shop-header {
            background-color: #34495e;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #1a252f;
        }

        #close-shop {
            background: none;
            border: none;
            color: #ecf0f1;
            font-size: 18px;
            cursor: pointer;
        }

        #shop-content {
            flex-grow: 1;
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            overflow-y: auto;
        }

        .shop-item {
            background-color: #34495e;
            border: 2px solid #2c3e50;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .shop-item:hover {
            transform: scale(1.05);
            border-color: #3498db;
        }

        .item-price {
            color: #f1c40f;
            font-weight: bold;
            margin-top: 5px;
        }

        /* –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ */
        #portfolio-window {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 70%;
            max-width: 600px;
            height: 60%;
            background-color: #2c3e50;
            border: 4px solid #1a252f;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            display: none;
            flex-direction: column;
            z-index: 10;
        }

        #portfolio-header {
            background-color: #34495e;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #1a252f;
        }

        #close-portfolio {
            background: none;
            border: none;
            color: #ecf0f1;
            font-size: 18px;
            cursor: pointer;
        }

        #portfolio-content {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .portfolio-item {
            background-color: #34495e;
            padding: 10px;
            margin-bottom: 10px;
            border-left: 4px solid #3498db;
        }

        /* –û–∫–Ω–æ –ø–æ–≥–∞—à–µ–Ω–∏—è –¥–æ–ª–≥–∞ */
        #debt-window {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50%;
            max-width: 500px;
            background-color: #2c3e50;
            border: 4px solid #e74c3c;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            display: none;
            flex-direction: column;
            z-index: 10;
            padding: 20px;
        }

        #debt-header {
            background-color: #34495e;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #1a252f;
            margin: -20px -20px 20px -20px;
        }

        #close-debt {
            background: none;
            border: none;
            color: #ecf0f1;
            font-size: 18px;
            cursor: pointer;
        }

        #debt-content {
            margin-bottom: 20px;
        }

        #debt-payment {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            background-color: #34495e;
            border: 2px solid #2c3e50;
            color: #ecf0f1;
        }

        #pay-debt {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            width: 100%;
        }

        /* Game Over */
        #game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60%;
            max-width: 500px;
            background-color: #2c3e50;
            border: 4px solid #e74c3c;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            display: none;
            flex-direction: column;
            z-index: 20;
            text-align: center;
            padding: 30px;
        }

        #game-over h2 {
            color: #e74c3c;
            margin-bottom: 20px;
        }

        #restart-button {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 10px 20px;
            margin-top: 20px;
            cursor: pointer;
            font-size: 16px;
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        #notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 10px 15px;
            background-color: #2ecc71;
            color: white;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            display: none;
            z-index: 100;
        }

        .notification-error {
            background-color: #e74c3c !important;
        }

        .deadline-warning {
            color: #e74c3c;
            font-weight: bold;
        }

        .project-item {
            background-color: #34495e;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 4px solid #3498db;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .project-item:hover {
            transform: translateX(5px);
        }

        .project-requirements {
            font-size: 12px;
            color: #bdc3c7;
            margin-top: 5px;
        }

        .project-disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .project-disabled:hover {
            transform: none;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <!-- –°—Ç–∞—Ç—É—Å –±–∞—Ä -->
        <div id="status-bar">
            <div class="stats-left">
                <div class="stat">
                    <div class="stat-icon">‚ù§Ô∏è</div>
                    <div class="stat-bar">
                        <div id="hp-fill" class="stat-fill"></div>
                    </div>
                    <span id="hp-text">80/100</span>
                </div>
                <div class="stat">
                    <div class="stat-icon">‚ö°</div>
                    <div class="stat-bar">
                        <div id="energy-fill" class="stat-fill"></div>
                    </div>
                    <span id="energy-text">70/100</span>
                </div>
                <div class="stat">
                    <div class="stat-icon">üò¥</div>
                    <div class="stat-bar">
                        <div id="sleep-fill" class="stat-fill"></div>
                    </div>
                    <span id="sleep-text">50/100</span>
                </div>
                <div class="stat">
                    <div class="stat-icon">üìà</div>
                    <div class="stat-bar">
                        <div id="xp-fill" class="stat-fill"></div>
                    </div>
                    <span id="xp-text">30/100</span>
                </div>
            </div>
            <div class="stats-right">
                <div class="stat">
                    <div class="stat-icon">üí∞</div>
                    <span id="money">1500</span>
                </div>
                <div class="stat">
                    <div class="stat-icon">üí∏</div>
                    <span id="debt">300000</span>
                </div>
                <div id="buffs">
                    <!-- –î–µ–±–∞—Ñ—ã –∏ –±–∞—Ñ—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
                </div>
            </div>
        </div>

        <!-- –†–∞–±–æ—á–∏–π —Å—Ç–æ–ª -->
        <div id="desktop">
            <div class="desktop-icon" id="freelance-board">
                <div class="icon-img">üìã</div>
                <div class="icon-label">–ë–∏—Ä–∂–∞ —Ñ—Ä–∏–ª–∞–Ω—Å–∞</div>
            </div>
            <div class="desktop-icon" id="shop">
                <div class="icon-img">üõí</div>
                <div class="icon-label">–ú–∞–≥–∞–∑–∏–Ω</div>
            </div>
            <div class="desktop-icon" id="portfolio">
                <div class="icon-img">üìÇ</div>
                <div class="icon-label">–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ</div>
            </div>
            <div class="desktop-icon" id="debt-payment-icon">
                <div class="icon-img">üí≥</div>
                <div class="icon-label">–ü–æ–≥–∞—Å–∏—Ç—å –¥–æ–ª–≥</div>
            </div>
            <div class="desktop-icon" id="save-game">
                <div class="icon-img">üíæ</div>
                <div class="icon-label">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</div>
            </div>
            <div class="desktop-icon" id="load-game">
                <div class="icon-img">üìÅ</div>
                <div class="icon-label">–ó–∞–≥—Ä—É–∑–∏—Ç—å</div>
            </div>
        </div>

        <!-- –û–∫–Ω–æ –Ω–æ–≤–µ–ª–ª—ã -->
        <div id="novel-window">
            <div id="novel-header">
                <h3>–ë–∏—Ä–∂–∞ —Ñ—Ä–∏–ª–∞–Ω—Å–∞</h3>
                <button id="close-novel">‚úï</button>
            </div>
            <div id="novel-content">
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –Ω–æ–≤–µ–ª–ª—ã –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
            </div>
            <div id="novel-choices">
                <!-- –í–∞—Ä–∏–∞–Ω—Ç—ã –≤—ã–±–æ—Ä–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
            </div>
        </div>

        <!-- –ú–∞–≥–∞–∑–∏–Ω -->
        <div id="shop-window">
            <div id="shop-header">
                <h3>–ú–∞–≥–∞–∑–∏–Ω</h3>
                <button id="close-shop">‚úï</button>
            </div>
            <div id="shop-content">
                <!-- –¢–æ–≤–∞—Ä—ã –º–∞–≥–∞–∑–∏–Ω–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
            </div>
        </div>

        <!-- –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ -->
        <div id="portfolio-window">
            <div id="portfolio-header">
                <h3>–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ –ú–∞–∫—Å–∞</h3>
                <button id="close-portfolio">‚úï</button>
            </div>
            <div id="portfolio-content">
                <!-- –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
            </div>
        </div>

        <!-- –û–∫–Ω–æ –ø–æ–≥–∞—à–µ–Ω–∏—è –¥–æ–ª–≥–∞ -->
        <div id="debt-window">
            <div id="debt-header">
                <h3>–ü–æ–≥–∞—à–µ–Ω–∏–µ –¥–æ–ª–≥–∞</h3>
                <button id="close-debt">‚úï</button>
            </div>
            <div id="debt-content">
                <p>–í–∞—à —Ç–µ–∫—É—â–∏–π –¥–æ–ª–≥: <span id="current-debt">300000</span> —Ä—É–±.</p>
                <p>–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞: <span id="available-money">1500</span> —Ä—É–±.</p>
                <p>–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –¥–ª—è –ø–æ–≥–∞—à–µ–Ω–∏—è:</p>
                <input type="number" id="debt-payment" min="0" max="1500" value="0">
                <button id="pay-debt">–ü–æ–≥–∞—Å–∏—Ç—å –¥–æ–ª–≥</button>
            </div>
        </div>

        <!-- Game Over -->
        <div id="game-over">
            <h2>–ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê</h2>
            <p>–í—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–≥–æ—Ä–µ–ª–∏ –∏ –Ω–µ –º–æ–∂–µ—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–±–æ—Ç—É.</p>
            <p>–í–µ—Å—å –≤–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç –ø–æ—Ç–µ—Ä—è–Ω.</p>
            <button id="restart-button">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
        </div>

        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
        <div id="notification"></div>
    </div>

    <script>
        // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã
        const gameState = {
            playerName: "–ú–∞–∫—Å",
            hp: 80,
            maxHp: 100,
            energy: 70,
            maxEnergy: 100,
            sleep: 50,
            maxSleep: 100,
            xp: 30,
            maxXp: 100,
            money: 1500,
            debt: 300000,
            level: 1,
            burnout: 0, // 0-3 —É—Ä–æ–≤–Ω—è –≤—ã–≥–æ—Ä–∞–Ω–∏—è
            caffeine: 0,
            consecutiveWork: 0, // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ –ø–æ–¥—Ä—è–¥
            equipment: {
                computer: 1,
                chair: 1,
                monitor: 1
            },
            skills: {
                programming: 1,
                design: 1,
                marketing: 1
            },
            currentProject: null,
            portfolio: [],
            day: 1,
            debtNotificationShown: false
        };

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const hpFill = document.getElementById('hp-fill');
        const hpText = document.getElementById('hp-text');
        const energyFill = document.getElementById('energy-fill');
        const energyText = document.getElementById('energy-text');
        const sleepFill = document.getElementById('sleep-fill');
        const sleepText = document.getElementById('sleep-text');
        const xpFill = document.getElementById('xp-fill');
        const xpText = document.getElementById('xp-text');
        const moneyElement = document.getElementById('money');
        const debtElement = document.getElementById('debt');
        const buffsContainer = document.getElementById('buffs');
        const novelWindow = document.getElementById('novel-window');
        const novelContent = document.getElementById('novel-content');
        const novelChoices = document.getElementById('novel-choices');
        const closeNovel = document.getElementById('close-novel');
        const shopWindow = document.getElementById('shop-window');
        const shopContent = document.getElementById('shop-content');
        const closeShop = document.getElementById('close-shop');
        const portfolioWindow = document.getElementById('portfolio-window');
        const portfolioContent = document.getElementById('portfolio-content');
        const closePortfolio = document.getElementById('close-portfolio');
        const debtWindow = document.getElementById('debt-window');
        const currentDebtElement = document.getElementById('current-debt');
        const availableMoneyElement = document.getElementById('available-money');
        const debtPaymentInput = document.getElementById('debt-payment');
        const payDebtButton = document.getElementById('pay-debt');
        const closeDebt = document.getElementById('close-debt');
        const debtPaymentIcon = document.getElementById('debt-payment-icon');
        const gameOverScreen = document.getElementById('game-over');
        const restartButton = document.getElementById('restart-button');
        const notification = document.getElementById('notification');

        // –ò–∫–æ–Ω–∫–∏ —Ä–∞–±–æ—á–µ–≥–æ —Å—Ç–æ–ª–∞
        const freelanceBoard = document.getElementById('freelance-board');
        const shopIcon = document.getElementById('shop');
        const portfolioIcon = document.getElementById('portfolio');
        const saveGameIcon = document.getElementById('save-game');
        const loadGameIcon = document.getElementById('load-game');

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞
        let currentTypingInterval = null;
        let currentScene = null;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            updateStats();
            loadGame(); // –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –∏–≥—Ä—É
            setupEventListeners();
            updateBuffs();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            showNotification(`–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${gameState.playerName}! –£ –≤–∞—Å –¥–æ–ª–≥ ${gameState.debt.toLocaleString()} —Ä—É–±. –ù—É–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å!`, 'info');
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –¥–æ–ª–≥–∞
            setInterval(checkDebt, 30000); // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            freelanceBoard.addEventListener('click', openFreelanceBoard);
            shopIcon.addEventListener('click', openShop);
            portfolioIcon.addEventListener('click', openPortfolio);
            debtPaymentIcon.addEventListener('click', openDebtWindow);
            saveGameIcon.addEventListener('click', saveGame);
            loadGameIcon.addEventListener('click', loadGame);
            closeNovel.addEventListener('click', closeNovelWindow);
            closeShop.addEventListener('click', closeShopWindow);
            closePortfolio.addEventListener('click', closePortfolioWindow);
            closeDebt.addEventListener('click', closeDebtWindow);
            payDebtButton.addEventListener('click', payDebt);
            restartButton.addEventListener('click', restartGame);
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞ –ø–æ –¥–æ–ª–≥—É
            debtPaymentInput.addEventListener('input', updateDebtPaymentMax);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
        function updateStats() {
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ HP
            const hpPercent = (gameState.hp / gameState.maxHp) * 100;
            hpFill.style.width = `${hpPercent}%`;
            hpText.textContent = `${gameState.hp}/${gameState.maxHp}`;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏
            const energyPercent = (gameState.energy / gameState.maxEnergy) * 100;
            energyFill.style.width = `${energyPercent}%`;
            energyText.textContent = `${gameState.energy}/${gameState.maxEnergy}`;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–Ω–∞
            const sleepPercent = (gameState.sleep / gameState.maxSleep) * 100;
            sleepFill.style.width = `${sleepPercent}%`;
            sleepText.textContent = `${gameState.sleep}/${gameState.maxSleep}`;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ XP
            const xpPercent = (gameState.xp / gameState.maxXp) * 100;
            xpFill.style.width = `${xpPercent}%`;
            xpText.textContent = `${gameState.xp}/${gameState.maxXp}`;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–µ–Ω–µ–≥
            moneyElement.textContent = gameState.money.toLocaleString();
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–ª–≥–∞
            debtElement.textContent = gameState.debt.toLocaleString();
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞—Ñ—Ñ–æ–≤/–¥–µ–±–∞—Ñ—Ñ–æ–≤
            updateBuffs();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞—Ñ—Ñ–æ–≤ –∏ –¥–µ–±–∞—Ñ—Ñ–æ–≤
        function updateBuffs() {
            buffsContainer.innerHTML = '';
            
            if (gameState.burnout > 0) {
                const burnoutElement = document.createElement('span');
                burnoutElement.className = 'buff burnout';
                burnoutElement.textContent = `–í—ã–≥–æ—Ä–∞–Ω–∏–µ ${gameState.burnout} —É—Ä–æ–≤–Ω—è`;
                buffsContainer.appendChild(burnoutElement);
            }
            
            if (gameState.caffeine > 0) {
                const caffeineElement = document.createElement('span');
                caffeineElement.className = 'buff caffeine';
                caffeineElement.textContent = `–ö–æ—Ñ–µ–∏–Ω: ${gameState.caffeine}`;
                buffsContainer.appendChild(caffeineElement);
            }
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –±–∏—Ä–∂–∏ —Ñ—Ä–∏–ª–∞–Ω—Å–∞
        function openFreelanceBoard() {
            novelWindow.style.display = 'flex';
            showProjectList();
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤
        function showProjectList() {
            novelContent.innerHTML = '';
            novelChoices.innerHTML = '';
            
            const header = document.createElement('div');
            header.className = 'dialogue';
            header.innerHTML = `<div class="character">–ë–∏—Ä–∂–∞ —Ñ—Ä–∏–ª–∞–Ω—Å–∞</div>
                               <div>–ü—Ä–∏–≤–µ—Ç, ${gameState.playerName}! –í—ã–±–µ—Ä–∏ –ø—Ä–æ–µ–∫—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã. –ù–µ –∑–∞–±—É–¥—å —Å–ª–µ–¥–∏—Ç—å –∑–∞ —É—Ä–æ–≤–Ω–µ–º —ç–Ω–µ—Ä–≥–∏–∏ –∏ –≤—ã–≥–æ—Ä–∞–Ω–∏—è!</div>`;
            novelContent.appendChild(header);
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã
            projects.forEach(project => {
                const projectElement = document.createElement('div');
                projectElement.className = 'project-item';
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç—É–ø–µ–Ω –ª–∏ –ø—Ä–æ–µ–∫—Ç –ø–æ —É—Ä–æ–≤–Ω—é
                const isLevelSufficient = gameState.level >= project.requiredLevel;
                const hasEnoughEnergy = gameState.energy >= project.energyCost;
                
                if (!isLevelSufficient) {
                    projectElement.classList.add('project-disabled');
                }
                
                projectElement.innerHTML = `
                    <h4>${project.name}</h4>
                    <p>${project.description}</p>
                    <p><strong>–û–ø–ª–∞—Ç–∞:</strong> ${project.payment} —Ä—É–±.</p>
                    <div class="project-requirements">
                        <p>–¢—Ä–µ–±—É–µ–º—ã–π —É—Ä–æ–≤–µ–Ω—å: ${project.requiredLevel} (–í–∞—à: ${gameState.level})</p>
                        <p>–ó–∞—Ç—Ä–∞—Ç—ã —ç–Ω–µ—Ä–≥–∏–∏: ${project.energyCost}</p>
                        <p>–û–ø—ã—Ç: +${project.xp} XP</p>
                    </div>
                `;
                
                if (isLevelSufficient) {
                    projectElement.addEventListener('click', () => {
                        startProject(project);
                    });
                }
                
                novelContent.appendChild(projectElement);
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –æ—Ç–¥—ã—Ö–∞
            const restButton = document.createElement('button');
            restButton.className = 'choice';
            restButton.textContent = '–û—Ç–¥–æ—Ö–Ω—É—Ç—å —Å–µ–≥–æ–¥–Ω—è';
            restButton.addEventListener('click', () => {
                applyEffects({ 
                    energy: 30, 
                    sleep: 40, 
                    hp: 10, 
                    burnout: -1, 
                    consecutiveWork: -gameState.consecutiveWork 
                });
                showNotification('–í—ã —Ö–æ—Ä–æ—à–æ –æ—Ç–¥–æ—Ö–Ω—É–ª–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ —Å–∏–ª—ã!', 'success');
                closeNovelWindow();
            });
            
            novelChoices.appendChild(restButton);
        }

        // –ù–∞—á–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
        function startProject(project) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ —ç–Ω–µ—Ä–≥–∏–∏
            let energyCost = project.energyCost;
            
            // –£—á–∏—Ç—ã–≤–∞–µ–º –≤—ã–≥–æ—Ä–∞–Ω–∏–µ (—É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∑–∞—Ç—Ä–∞—Ç—ã —ç–Ω–µ—Ä–≥–∏–∏)
            if (gameState.burnout > 0) {
                const burnoutMultiplier = [1, 1.15, 1.25, 1.5][gameState.burnout];
                energyCost = Math.floor(energyCost * burnoutMultiplier);
            }
            
            if (gameState.energy < energyCost) {
                // –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏ - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ–º, —á—Ç–æ –±—É–¥–µ—Ç –ø–æ—Ç—Ä–∞—á–µ–Ω–æ –∑–¥–æ—Ä–æ–≤—å–µ
                const healthCost = energyCost - gameState.energy;
                if (confirm(`–í–Ω–∏–º–∞–Ω–∏–µ! –£ –≤–∞—Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞. –í—ã –ø–æ—Ç—Ä–∞—Ç–∏—Ç–µ ${healthCost} HP –≤–º–µ—Å—Ç–æ –Ω–µ–¥–æ—Å—Ç–∞—é—â–µ–π —ç–Ω–µ—Ä–≥–∏–∏. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?`)) {
                    applyEffects({ 
                        energy: -gameState.energy, 
                        hp: -healthCost,
                        money: project.payment,
                        xp: project.xp,
                        consecutiveWork: 1
                    });
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–µ–∫—Ç –≤ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ
                    addToPortfolio({
                        name: project.name,
                        description: project.description,
                        payment: project.payment
                    });
                    
                    showNotification(`–ü—Ä–æ–µ–∫—Ç "${project.name}" –∑–∞–≤–µ—Ä—à–µ–Ω! –í—ã –ø–æ–ª—É—á–∏–ª–∏ ${project.payment} —Ä—É–±. –∏ ${project.xp} XP.`, 'success');
                    closeNovelWindow();
                }
            } else {
                // –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏ - –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
                applyEffects({ 
                    energy: -energyCost, 
                    money: project.payment,
                    xp: project.xp,
                    consecutiveWork: 1
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–µ–∫—Ç –≤ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ
                addToPortfolio({
                    name: project.name,
                    description: project.description,
                    payment: project.payment
                });
                
                showNotification(`–ü—Ä–æ–µ–∫—Ç "${project.name}" –∑–∞–≤–µ—Ä—à–µ–Ω! –í—ã –ø–æ–ª—É—á–∏–ª–∏ ${project.payment} —Ä—É–±. –∏ ${project.xp} XP.`, 'success');
                closeNovelWindow();
            }
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞ –Ω–æ–≤–µ–ª–ª—ã
        function closeNovelWindow() {
            novelWindow.style.display = 'none';
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –æ–∫–Ω–∞
            if (currentTypingInterval) {
                clearInterval(currentTypingInterval);
                currentTypingInterval = null;
            }
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞
        function openShop() {
            shopWindow.style.display = 'flex';
            renderShopItems();
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞
        function closeShopWindow() {
            shopWindow.style.display = 'none';
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ
        function openPortfolio() {
            portfolioWindow.style.display = 'flex';
            renderPortfolio();
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ
        function closePortfolioWindow() {
            portfolioWindow.style.display = 'none';
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞ –ø–æ–≥–∞—à–µ–Ω–∏—è –¥–æ–ª–≥–∞
        function openDebtWindow() {
            debtWindow.style.display = 'flex';
            currentDebtElement.textContent = gameState.debt.toLocaleString();
            availableMoneyElement.textContent = gameState.money.toLocaleString();
            updateDebtPaymentMax();
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞ –ø–æ–≥–∞—à–µ–Ω–∏—è –¥–æ–ª–≥–∞
        function closeDebtWindow() {
            debtWindow.style.display = 'none';
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –ø–ª–∞—Ç–µ–∂–∞ –ø–æ –¥–æ–ª–≥—É
        function updateDebtPaymentMax() {
            debtPaymentInput.max = Math.min(gameState.money, gameState.debt);
            if (parseInt(debtPaymentInput.value) > parseInt(debtPaymentInput.max)) {
                debtPaymentInput.value = debtPaymentInput.max;
            }
        }

        // –ü–æ–≥–∞—à–µ–Ω–∏–µ –¥–æ–ª–≥–∞
        function payDebt() {
            const payment = parseInt(debtPaymentInput.value);
            
            if (payment <= 0) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –¥–ª—è –ø–æ–≥–∞—à–µ–Ω–∏—è!', 'error');
                return;
            }
            
            if (payment > gameState.money) {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è –ø–æ–≥–∞—à–µ–Ω–∏—è!', 'error');
                return;
            }
            
            if (payment > gameState.debt) {
                showNotification('–°—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞ –ø—Ä–µ–≤—ã—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –¥–æ–ª–≥–∞!', 'error');
                return;
            }
            
            gameState.money -= payment;
            gameState.debt -= payment;
            
            showNotification(`–í—ã –ø–æ–≥–∞—Å–∏–ª–∏ ${payment.toLocaleString()} —Ä—É–±. –¥–æ–ª–≥–∞! –û—Å—Ç–∞—Ç–æ–∫: ${gameState.debt.toLocaleString()} —Ä—É–±.`, 'success');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            updateStats();
            currentDebtElement.textContent = gameState.debt.toLocaleString();
            availableMoneyElement.textContent = gameState.money.toLocaleString();
            updateDebtPaymentMax();
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –¥–æ–ª–≥–µ, –µ—Å–ª–∏ –¥–æ–ª–≥ –ø–æ–≥–∞—à–µ–Ω
            if (gameState.debt === 0) {
                gameState.debtNotificationShown = false;
                showNotification('–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–≥–∞—Å–∏–ª–∏ –¥–æ–ª–≥!', 'success');
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–ª–≥–∞ (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏)
        function checkDebt() {
            if (gameState.debt > 0 && !gameState.debtNotificationShown) {
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ –≤ —Å—á–µ—Ç –¥–æ–ª–≥–∞
                const autoPayment = Math.min(gameState.money, 15000);
                
                if (autoPayment > 0) {
                    gameState.money -= autoPayment;
                    gameState.debt -= autoPayment;
                    gameState.hp -= 15; // –®—Ç—Ä–∞—Ñ –∑–∞ –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å
                    
                    showNotification(`–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ –≤ —Å—á–µ—Ç –¥–æ–ª–≥–∞: ${autoPayment.toLocaleString()} —Ä—É–±. –®—Ç—Ä–∞—Ñ: -15 HP.`, 'error');
                    
                    updateStats();
                    
                    if (gameState.hp <= 0) {
                        gameState.hp = 0;
                        gameOver();
                    }
                } else {
                    // –ù–µ—Ç –¥–µ–Ω–µ–≥ –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è, –Ω–æ –≤—Å–µ —Ä–∞–≤–Ω–æ —à—Ç—Ä–∞—Ñ
                    gameState.hp -= 15;
                    showNotification('–£ –≤–∞—Å –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å! –®—Ç—Ä–∞—Ñ: -15 HP.', 'error');
                    
                    updateStats();
                    
                    if (gameState.hp <= 0) {
                        gameState.hp = 0;
                        gameOver();
                    }
                }
                
                gameState.debtNotificationShown = true;
            }
        }

        // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –≤—ã–±–æ—Ä–∞
        function applyEffects(effects) {
            Object.keys(effects).forEach(key => {
                if (key in gameState) {
                    gameState[key] += effects[key];
                    
                    // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π
                    if (key === 'hp') {
                        if (gameState.hp > gameState.maxHp) gameState.hp = gameState.maxHp;
                        if (gameState.hp <= 0) {
                            gameState.hp = 0;
                            gameOver();
                        }
                    }
                    
                    if (key === 'energy' && gameState.energy > gameState.maxEnergy) {
                        gameState.energy = gameState.maxEnergy;
                    }
                    
                    if (key === 'sleep' && gameState.sleep > gameState.maxSleep) {
                        gameState.sleep = gameState.maxSleep;
                    }
                    
                    if (key === 'xp' && gameState.xp >= gameState.maxXp) {
                        levelUp();
                    }
                    
                    if (key === 'consecutiveWork') {
                        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –≤—ã–≥–æ—Ä–∞–Ω–∏—è
                        if (gameState.consecutiveWork >= 3 && gameState.burnout < 3) {
                            gameState.burnout = Math.min(3, Math.floor(gameState.consecutiveWork / 3));
                            showNotification(`–£—Ä–æ–≤–µ–Ω—å –≤—ã–≥–æ—Ä–∞–Ω–∏—è –ø–æ–≤—ã—à–µ–Ω –¥–æ ${gameState.burnout}!`, 'error');
                        }
                    }
                }
            });
            
            updateStats();
        }

        // –ü–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è
        function levelUp() {
            gameState.level++;
            gameState.xp = 0;
            gameState.maxXp = Math.floor(gameState.maxXp * 1.5);
            gameState.maxHp += 10;
            gameState.maxEnergy += 10;
            gameState.hp = gameState.maxHp;
            gameState.energy = gameState.maxEnergy;
            showNotification(`–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ —É—Ä–æ–≤–Ω—è ${gameState.level}!`, 'success');
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ
        function addToPortfolio(project) {
            gameState.portfolio.push({
                ...project,
                day: gameState.day
            });
        }

        // –†–µ–Ω–¥–µ—Ä –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ
        function renderPortfolio() {
            portfolioContent.innerHTML = '';
            
            if (gameState.portfolio.length === 0) {
                portfolioContent.innerHTML = '<p>–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ –ø—É—Å—Ç–æ. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–µ–∫—Ç–æ–≤!</p>';
                return;
            }
            
            gameState.portfolio.forEach(project => {
                const projectElement = document.createElement('div');
                projectElement.className = 'portfolio-item';
                
                projectElement.innerHTML = `
                    <h4>${project.name}</h4>
                    <p>${project.description}</p>
                    <p><strong>–û–ø–ª–∞—Ç–∞:</strong> ${project.payment} —Ä—É–±.</p>
                    <p><strong>–í—ã–ø–æ–ª–Ω–µ–Ω–æ:</strong> –¥–µ–Ω—å ${project.day}</p>
                `;
                
                portfolioContent.appendChild(projectElement);
            });
        }

        // –†–µ–Ω–¥–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤ –≤ –º–∞–≥–∞–∑–∏–Ω–µ
        function renderShopItems() {
            shopContent.innerHTML = '';
            
            shopItems.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'shop-item';
                
                const itemName = document.createElement('div');
                itemName.textContent = item.name;
                itemElement.appendChild(itemName);
                
                const itemDescription = document.createElement('div');
                itemDescription.style.fontSize = '12px';
                itemDescription.style.margin = '5px 0';
                itemDescription.textContent = item.description;
                itemElement.appendChild(itemDescription);
                
                const itemPrice = document.createElement('div');
                itemPrice.className = 'item-price';
                itemPrice.textContent = `${item.price} ‚ÇΩ`;
                itemElement.appendChild(itemPrice);
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞, —Ö–≤–∞—Ç–∞–µ—Ç –ª–∏ –¥–µ–Ω–µ–≥
                if (gameState.money < item.price) {
                    itemElement.style.opacity = '0.5';
                    itemElement.title = '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥';
                } else {
                    itemElement.addEventListener('click', () => {
                        buyItem(item);
                    });
                }
                
                shopContent.appendChild(itemElement);
            });
        }

        // –ü–æ–∫—É–ø–∫–∞ —Ç–æ–≤–∞—Ä–∞
        function buyItem(item) {
            if (gameState.money >= item.price) {
                gameState.money -= item.price;
                
                if (item.effect) {
                    applyEffects(item.effect);
                }
                
                if (item.type === 'equipment') {
                    gameState.equipment[item.id] = (gameState.equipment[item.id] || 0) + 1;
                }
                
                showNotification(`–í—ã –∫—É–ø–∏–ª–∏: ${item.name}`, 'success');
                updateStats();
                renderShopItems(); // –û–±–Ω–æ–≤–ª—è–µ–º –º–∞–≥–∞–∑–∏–Ω
            } else {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!', 'error');
            }
        }

        // Game Over
        function gameOver() {
            gameOverScreen.style.display = 'flex';
        }

        // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        function restartGame() {
            // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
            Object.assign(gameState, {
                playerName: "–ú–∞–∫—Å",
                hp: 80,
                maxHp: 100,
                energy: 70,
                maxEnergy: 100,
                sleep: 50,
                maxSleep: 100,
                xp: 30,
                maxXp: 100,
                money: 1500,
                debt: 300000,
                level: 1,
                burnout: 0,
                caffeine: 0,
                consecutiveWork: 0,
                equipment: {
                    computer: 1,
                    chair: 1,
                    monitor: 1
                },
                skills: {
                    programming: 1,
                    design: 1,
                    marketing: 1
                },
                currentProject: null,
                portfolio: [],
                day: 1,
                debtNotificationShown: false
            });
            
            gameOverScreen.style.display = 'none';
            updateStats();
            showNotification('–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å –∑–∞–Ω–æ–≤–æ! –£–¥–∞—á–∏, –ú–∞–∫—Å!', 'info');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message, type = 'info') {
            notification.textContent = message;
            notification.style.display = 'block';
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–≤–µ—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞
            if (type === 'error') {
                notification.className = 'notification-error';
            } else if (type === 'success') {
                notification.style.backgroundColor = '#2ecc71';
            } else {
                notification.style.backgroundColor = '#3498db';
            }
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä—ã
        function saveGame() {
            localStorage.setItem('freelanceSimulatorSave', JSON.stringify(gameState));
            showNotification('–ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!', 'success');
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã
        function loadGame() {
            const savedGame = localStorage.getItem('freelanceSimulatorSave');
            if (savedGame) {
                try {
                    const parsedGame = JSON.parse(savedGame);
                    Object.assign(gameState, parsedGame);
                    updateStats();
                    showNotification('–ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!', 'success');
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', e);
                    showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è', 'error');
                }
            }
        }

        // –ü—Ä–æ–µ–∫—Ç—ã –Ω–∞ –±–∏—Ä–∂–µ
        const projects = [
            {
                id: "simple_landing",
                name: "–ü—Ä–æ—Å—Ç–æ–π –ª–µ–Ω–¥–∏–Ω–≥",
                description: "–°–æ–∑–¥–∞–Ω–∏–µ –æ–¥–Ω–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–≥–æ —Å–∞–π—Ç–∞ –¥–ª—è –º–∞–ª–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞",
                requiredLevel: 1,
                energyCost: 20,
                payment: 200,
                xp: 10
            },
            {
                id: "corporate_site",
                name: "–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —Å–∞–π—Ç",
                description: "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–≥–æ —Å–∞–π—Ç–∞ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏",
                requiredLevel: 2,
                energyCost: 40,
                payment: 500,
                xp: 25
            },
            {
                id: "online_store",
                name: "–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω",
                description: "–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞",
                requiredLevel: 3,
                energyCost: 60,
                payment: 1000,
                xp: 50
            },
            {
                id: "web_app",
                name: "–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ",
                description: "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–ª–æ–∂–Ω–æ–≥–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö",
                requiredLevel: 4,
                energyCost: 80,
                payment: 2000,
                xp: 100
            },
            {
                id: "mobile_app",
                name: "–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ",
                description: "–°–æ–∑–¥–∞–Ω–∏–µ –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–≥–æ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è",
                requiredLevel: 5,
                energyCost: 100,
                payment: 5000,
                xp: 200
            }
        ];

        // –¢–æ–≤–∞—Ä—ã –≤ –º–∞–≥–∞–∑–∏–Ω–µ
        const shopItems = [
            {
                id: "coffee",
                name: "–ö–æ—Ñ–µ",
                description: "–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 20 —ç–Ω–µ—Ä–≥–∏–∏, –¥–∞–µ—Ç +5 –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏",
                price: 50,
                type: "consumable",
                effect: { energy: 20, caffeine: 5 }
            },
            {
                id: "energy_drink",
                name: "–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫",
                description: "–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 40 —ç–Ω–µ—Ä–≥–∏–∏, –¥–∞–µ—Ç +10 –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏",
                price: 80,
                type: "consumable",
                effect: { energy: 40, caffeine: 10, hp: -5 }
            },
            {
                id: "healthy_food",
                name: "–ó–¥–æ—Ä–æ–≤–∞—è –µ–¥–∞",
                description: "–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 15 HP –∏ 10 —ç–Ω–µ—Ä–≥–∏–∏",
                price: 100,
                type: "consumable",
                effect: { hp: 15, energy: 10 }
            },
            {
                id: "programming_course",
                name: "–ö—É—Ä—Å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è",
                description: "–ü–æ–≤—ã—à–∞–µ—Ç –Ω–∞–≤—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è",
                price: 300,
                type: "skill",
                effect: { xp: 30 }
            },
            {
                id: "design_course",
                name: "–ö—É—Ä—Å –¥–∏–∑–∞–π–Ω–∞",
                description: "–ü–æ–≤—ã—à–∞–µ—Ç –Ω–∞–≤—ã–∫ –¥–∏–∑–∞–π–Ω–∞",
                price: 250,
                type: "skill",
                effect: { xp: 25 }
            },
            {
                id: "better_computer",
                name: "–£–ª—É—á—à–µ–Ω–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä",
                description: "–ü–æ–≤—ã—à–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã",
                price: 1000,
                type: "equipment",
                effect: { maxEnergy: 10 }
            },
            {
                id: "ergonomic_chair",
                name: "–≠—Ä–≥–æ–Ω–æ–º–∏—á–Ω–æ–µ –∫—Ä–µ—Å–ª–æ",
                description: "–°–Ω–∏–∂–∞–µ—Ç —É—Å—Ç–∞–ª–æ—Å—Ç—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ",
                price: 500,
                type: "equipment",
                effect: { maxHp: 10 }
            }
        ];

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>